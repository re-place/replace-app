<div class="py-4">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 md:px-8">
        <h1 class="text-2xl font-semibold text-gray-900">Buchen</h1>
    </div>
    <div class="mx-auto max-w-7xl px-4 sm:px-6 md:px-8">
        <div class="p-5 rounded-lg border-4 border-dashed border-gray-200 md:flex md:flex-row">

            <!-- Select fields -->
            <div class="flex flex-col md:w-3/10">
                
                <mat-form-field>
                    <mat-label>Standort</mat-label>
                    <mat-select
                        [(ngModel)]="selectedSite"
                        (selectionChange)="getFloors()">
                        <mat-option></mat-option>
                        <mat-option *ngFor="let site of sites" [value]="site">
                            {{ site.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field *ngIf="selectedSite">
                    <mat-label>Stockwerk</mat-label>
                    <mat-select
                        [(ngModel)]="selectedFloor"
                        (selectionChange)="getBookableEntities()"
                        [disabled]="floors.length == 1">
                        <mat-option></mat-option>
                        <mat-option
                            *ngFor="let floor of floors"
                            [value]="floor">
                            {{ floor.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <!--
                    At this point the floor's image should be shown
                    The bookable entities should be marked clearly
                -->

                <!-- This block will be shown at the bottom for mobile -->
                <div class="hidden md:flex md:flex-col md:max-w-230">
                    <div *ngIf="selectedSite && selectedFloor">
                        <mat-checkbox
                            class="w-1/2"
                            *ngFor="let entity of bookableEntities"
                            (change)="updateSelectedEntities(entity, $event.checked)">
                            {{ entity.name }}
                        </mat-checkbox>
                    </div>


                    <button *ngIf="selectedSite && selectedFloor && selectedEntities.length > 0"
                        mat-raised-button color="primary"
                        (click)="sendBooking()"
                        class="mt-5">
                        Buchung versenden
                    </button>
                </div>


            </div>

            <div class="w-1/1 md:w-7/10">
                <img [src]="imgSrc" *ngIf="imgSrc && selectedSite"
                    class="block w-full h-auto">
            </div>

            <div class="visible flex flex-col md:hidden">
                <div *ngIf="selectedSite && selectedFloor">
                    <mat-checkbox
                        class="w-1/2"
                        *ngFor="let entity of bookableEntities"
                        (change)="updateSelectedEntities(entity, $event.checked)">
                        {{ entity.name }}
                    </mat-checkbox>
                </div>

                <button *ngIf="selectedSite && selectedFloor && selectedEntities.length > 0"
                    mat-raised-button color="primary"
                    (click)="sendBooking()"
                    class="mt-5">
                    Buchung versenden
                </button>
            </div>


            
        </div>
    </div>
</div>
